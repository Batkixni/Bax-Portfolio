<!doctype html>
<html lang="zh-TW">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{{title}} - Bax Portfolio</title>
        <meta name="description" content="{{description}}" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="article" />
        <meta
            property="og:url"
            content="https://bax.sorai.tw/{{category}}/{{id}}"
        />
        <meta property="og:title" content="{{title}} - Bax Portfolio" />
        <meta property="og:description" content="{{description}}" />
        {{#image}}
        <meta property="og:image" content="{{image}}" />
        {{/image}}
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:site_name" content="Bax Portfolio" />
        <meta property="og:locale" content="zh_TW" />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta
            property="twitter:url"
            content="https://bax.sorai.tw/work/{{category}}/{{id}}"
        />
        <meta property="twitter:title" content="{{title}} - Bax Portfolio" />
        <meta property="twitter:description" content="{{description}}" />
        {{#image}}
        <meta property="twitter:image" content="{{image}}" />
        {{/image}}

        <link rel="icon" type="image/jpeg" href="/src/images/favico.jpg" />
        <link rel="stylesheet" href="/src/css/style.css" />

        <!-- Vidstack Player CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.vidstack.io/player/theme.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.vidstack.io/player/video.css"
        />

        <script src="/src/lib/htmx.min.js"></script>
        <script src="/src/lib/gsap.min.js"></script>
        <script src="/src/lib/ScrollTrigger.min.js"></script>
        <script src="/src/lib/p5.min.js"></script>

        <!-- Vidstack Player JavaScript -->
        <script type="module" src="https://cdn.vidstack.io/player"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Anton&family=Space+Grotesk:wght@300..700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <!-- Loading Screen -->
        <div id="loading-screen">
            <div class="loading-content">
                <div class="loading-logo">
                    <svg
                        id="loading-svg"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 1133.86 566.93"
                    >
                        <g id="svg-layer-1">
                            <g>
                                <path
                                    id="svg-path-1"
                                    d="m671.12,289.28c0-.3-.01-.6-.02-.91-.02-.61-.04-1.23-.07-1.84,0-.2-.02-.41-.03-.61-.03-.71-.08-1.41-.12-2.12,0-.11-.01-.22-.02-.33-.05-.8-.12-1.59-.19-2.38,0-.02,0-.04,0-.07-.88-9.94-2.96-19.75-6.23-29.07-.03-.08-.05-.16-.08-.23-.22-.62-.45-1.24-.68-1.86-.07-.19-.14-.37-.21-.56-.19-.5-.39-1-.58-1.49-.12-.3-.24-.61-.36-.91-.15-.36-.3-.73-.45-1.09-.18-.44-.37-.88-.55-1.31-.09-.22-.19-.43-.29-.64-.26-.58-.51-1.16-.78-1.74-.03-.06-.06-.12-.09-.19-14.96-32.15-45.48-56.37-91.69-56.17-.3,0-.6,0-.9,0-.31,0-.62,0-.94.01-46.22-.2-76.75,24.03-91.7,56.19-.02.05-.05.1-.07.16-.27.59-.53,1.17-.79,1.76-.09.21-.18.41-.27.62-.19.45-.38.9-.57,1.34-.15.35-.29.7-.44,1.05-.13.32-.25.64-.38.95-.19.48-.38.97-.57,1.46-.07.2-.15.39-.22.59-.23.61-.45,1.21-.67,1.83-.03.09-.06.18-.1.27-3.26,9.32-5.34,19.11-6.22,29.04,0,.02,0,.05,0,.07-.07.79-.13,1.59-.19,2.38,0,.11-.01.22-.02.33-.05.71-.09,1.41-.12,2.12-.01.21-.02.41-.03.62-.03.61-.05,1.22-.07,1.83,0,.3-.01.61-.02.91-.01.51-.02,1.03-.03,1.54,0,.41,0,.81,0,1.22,0,.41,0,.81,0,1.22,0,.51.02,1.03.03,1.54,0,.3.01.61.02.91.02.61.04,1.22.07,1.83,0,.21.02.41.03.62.03.71.08,1.41.12,2.12,0,.11.01.22.02.33.05.79.12,1.59.19,2.38,0,.02,0,.05,0,.07.88,9.93,2.96,19.73,6.22,29.05.03.09.06.18.09.27.22.61.44,1.22.67,1.83.07.19.14.39.22.58.19.49.38.98.57,1.46.12.32.25.63.38.95.14.35.29.71.44,1.06.19.45.37.89.57,1.34.09.21.18.41.27.62.26.59.52,1.18.8,1.77.02.05.05.1.07.14,14.95,32.17,45.49,56.4,91.71,56.2.32,0,.63,0,.94.01.3,0,.6,0,.9,0,46.21.2,76.73-24.02,91.69-56.18.03-.06.06-.12.08-.18.27-.58.53-1.16.78-1.74.1-.22.19-.43.29-.65.19-.44.37-.87.55-1.31.15-.36.3-.72.45-1.09.12-.31.24-.61.36-.92.2-.5.39-.99.58-1.49.07-.19.14-.37.21-.56.23-.62.46-1.24.68-1.86.03-.08.05-.16.08-.24,3.27-9.33,5.35-19.13,6.23-29.07,0-.02,0-.04,0-.07.07-.79.13-1.59.19-2.38,0-.11.01-.22.02-.33.05-.71.09-1.41.12-2.12.01-.2.02-.41.03-.61.03-.61.05-1.23.07-1.84,0-.3.01-.6.02-.91.01-.51.02-1.03.03-1.54,0-.41,0-.82,0-1.22,0-.41,0-.82,0-1.22,0-.51-.02-1.03-.03-1.54Z"
                                />
                                <path
                                    id="svg-path-2"
                                    d="m0,0v566.93h1133.86V0H0Zm725.89,503.89h-317.02v-211.84h-212.6c117.41,0,212.6,95.18,212.6,212.6h0s-317.88,0-317.88,0V79.45h105.28c117.41,0,212.6,95.18,212.6,212.6v-141.94c38.96-43.81,95.74-71.42,158.98-71.42,63.21,0,119.97,27.61,158.9,71.42-.44,38.3.43,197.65,0,291.1,4.47-79.97,68.05-144.14,147.77-149.55-82.69-5.61-148.02-74.45-148.02-158.56v-53.66h317.88v53.66c0,84.11-65.34,152.95-148.02,158.56,82.69,5.61,148.02,74.45,148.02,158.56v53.66h-317.88"
                                />
                            </g>
                        </g>
                    </svg>
                </div>
                <div class="loading-progress">
                    <div class="progress-bar"></div>
                </div>
            </div>
        </div>

        <!-- Background Canvas -->
        <div id="canvas-container"></div>

        <!-- Custom Cursor -->
        <div class="cursor"></div>
        <div class="cursor-follower"></div>

        <!-- Navigation -->
        <nav class="nav">
            <div class="nav-brand">
                <a
                    href="/"
                    class="brand-link"
                    onclick="sessionStorage.setItem('internalNavigation', 'true');"
                >
                    <h1>Bax</h1>
                </a>
            </div>
            <button
                class="theme-toggle"
                id="theme-toggle"
                aria-label="Toggle theme"
            >
                <span class="theme-icon">ðŸŒ™</span>
            </button>
        </nav>

        <!-- Work Detail Content -->
        <main class="work-detail-page">
            <!-- Fullscreen Hero Image -->
            {{#image}}
            <div class="work-hero-fullscreen">
                <div class="work-hero-cover"></div>
                <img src="{{image}}" alt="{{title}}" class="work-hero-bg" />
                <div class="work-hero-overlay">
                    <div class="work-hero-nav">
                        <div class="work-category-hero">{{category}}</div>
                    </div>
                    <div class="scroll-indicator">
                        <span>Scroll</span>
                        <div class="scroll-arrow">â†“</div>
                    </div>
                </div>
            </div>
            {{/image}}

            <!-- Work Info Section -->
            <section class="work-info-section">
                <div class="work-info-container">
                    <h1 class="work-title">{{title}}</h1>
                    <div class="work-meta-row">
                        <div class="work-info-left">
                            <p class="work-description">{{description}}</p>
                        </div>
                        <div class="work-info-right">
                            {{#date}}
                            <div class="work-date">{{date}}</div>
                            {{/date}} {{#tags}}
                            <div class="work-tags">
                                {{#each tags}}
                                <span class="work-tag">{{this}}</span>
                                {{/each}}
                            </div>
                            {{/tags}}
                        </div>
                    </div>
                </div>
            </section>

            <!-- Work Content -->
            <section class="work-content-section">
                <div class="work-content-container">
                    <article class="work-content animate-element">
                        <div class="work-article">{{content}}</div>
                    </article>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer animate-element">
            <div class="footer-content">
                <p>&copy; 2025 Bax. All Rights Reserved.</p>
                <div class="footer-links">
                    <a href="https://x.com/baxartworkz" class="footer-link"
                        >X</a
                    >
                    <a
                        href="https://www.behance.net/baxartworkz"
                        class="footer-link"
                        >Behance</a
                    >
                    <a
                        href="https://www.youtube.com/@baxartworkz"
                        class="footer-link"
                        >Youtube</a
                    >
                </div>
            </div>
        </footer>

        <script src="/src/js/transition-manager.js"></script>
        <script src="/src/js/animations.js"></script>
        <script src="/src/js/app.js"></script>
        <script src="/src/js/particles.js"></script>

        <!-- Vidstack Player Initialization -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Initialize all video players
                const videoPlayers = document.querySelectorAll("media-player");
                videoPlayers.forEach((player) => {
                    player.addEventListener("can-play", () => {
                        console.log("Video player ready:", player.id);

                        // Debug quality options
                        setTimeout(() => {
                            const qualities = player.qualities;
                            console.log(
                                "Available qualities:",
                                qualities?.length || 0,
                            );
                            if (qualities) {
                                qualities.forEach((quality, index) => {
                                    console.log(`Quality ${index}:`, {
                                        height: quality.height,
                                        width: quality.width,
                                        bitrate: quality.bitrate,
                                        selected: quality.selected,
                                    });
                                });
                            }
                        }, 2000);
                    });

                    // Listen for provider changes
                    player.addEventListener("provider-change", (event) => {
                        console.log("Provider changed:", event.detail.provider);
                    });

                    // Listen for quality changes
                    player.addEventListener("qualities-change", (event) => {
                        console.log("Qualities changed:", event.detail);
                    });
                });
            });
        </script>
    </body>
</html>
